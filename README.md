# Telegram Bot SDK Laravel

–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram –±–æ—Ç–æ–≤ –Ω–∞ Laravel —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–±–æ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú—É–ª—å—Ç–∏–±–æ—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ dev –∏ prod —Ç–æ–∫–µ–Ω–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤** –±–æ—Ç–æ–≤
- **Webhook —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π SSL
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –±–æ—Ç–æ–≤
- **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç** –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.1+
- Laravel 10+
- MySQL/PostgreSQL/SQLite

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç:
```bash
composer require tbot/laravel
```

2. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```bash
php artisan vendor:publish --provider="Bot\Providers\BotServiceProvider" --tag="config"
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
php artisan migrate
```

## üåç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ dev –∏ prod –æ–∫—Ä—É–∂–µ–Ω–∏—è. –¢–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `APP_ENV` –≤ —Ñ–∞–π–ª–µ `.env`:

```env
APP_ENV=dev  # –∏–ª–∏ prod
```

## ü§ñ –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥–∞ bot:new

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤:

```bash
php artisan bot:new
```

–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è:
1. **–í–≤–æ–¥ –∏–º–µ–Ω–∏ –±–æ—Ç–∞** (–ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
2. **–¢–æ–∫–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** (dev) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
3. **–¢–æ–∫–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞** (prod) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
4. **ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–í–∞–∂–Ω–æ**: –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω (dev –∏–ª–∏ prod) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —Å –æ–±–æ–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
php artisan bot:new

# –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ —Å dev —Ç–æ–∫–µ–Ω–æ–º
php artisan bot:new

# –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º webhook
php artisan bot:new --webhook=https://example.com/webhook/mybot
```

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏

### –°–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤
```bash
php artisan bot:manage list
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
```bash
php artisan bot:manage show mybot
```

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
```bash
php artisan bot:manage enable mybot
php artisan bot:manage disable mybot
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞
```bash
php artisan bot:manage test mybot
```

### –£–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–∞
```bash
php artisan bot:manage delete mybot
```

## üåê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Webhook

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
```bash
php artisan bot:webhook set mybot https://example.com/webhook/mybot
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook
```bash
php artisan bot:webhook info mybot
```

### –£–¥–∞–ª–µ–Ω–∏–µ webhook
```bash
php artisan bot:webhook delete mybot
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook
```bash
php artisan bot:webhook test mybot
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
php artisan bot:stats
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞
```bash
php artisan bot:stats --bot=mybot
```

### –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
php artisan bot:stats --bot=mybot --detailed
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
```bash
php artisan bot:health
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```bash
php artisan bot:migrate export
```

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```bash
php artisan bot:migrate import --path=backup.json
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
php artisan bot:migrate backup
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
php artisan bot:migrate clear
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
php artisan bot:config show
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
```bash
php artisan bot:config get api.timeout
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è
```bash
php artisan bot:config set api.timeout 30
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ Bots/                    # –ö–ª–∞—Å—Å—ã –±–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ AbstractBot.php     # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îî‚îÄ‚îÄ MyBot.php          # –í–∞—à –±–æ—Ç
‚îú‚îÄ‚îÄ Console/Commands/       # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îî‚îÄ‚îÄ Bot.php            # –ú–æ–¥–µ–ª—å –±–æ—Ç–∞
config/
‚îî‚îÄ‚îÄ bot.php             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- Webhook secret –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üìù –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –±–æ—Ç–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª–∞—Å—Å –≤ `app/Bots/`:

```php
<?php

namespace App\Bots;

class MyBot extends AbstractBot
{
    public function main(): void
    {
        $this->commands();
        
        if ($this->hasMessageText() && $this->isMessageCommand()) {
            $this->handleCommand($this->getMessageText());
        }
    }

    public function commands(): void
    {
        $this->registerCommand('start', function () {
            $this->sendSelf('üéâ –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç MyBot');
        }, [
            'description' => '–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞'
        ]);
    }
}
```

## üåç –û–∫—Ä—É–∂–µ–Ω–∏—è

### Dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∏–∑ –ø–æ–ª—è `dev_token`
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTP webhook (–ª–æ–∫–∞–ª—å–Ω–æ)

### Prod –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∏–∑ –ø–æ–ª—è `prod_token`
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- –¢—Ä–µ–±—É–µ—Ç HTTPS webhook

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –≤–µ—Ä—Å–∏–∏ 1.x

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–æ—Ç—ã —Å –µ–¥–∏–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
php artisan migrate
```

2. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å—É—Ç—Å—è –≤ –ø–æ–ª–µ `dev_token`

3. –î–æ–±–∞–≤—å—Ç–µ prod —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:
```bash
php artisan bot:manage show mybot
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

<!-- - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `vendor/bot/bot/docs/` -->
- Issues: GitHub Issues
- –û–±—Å—É–∂–¥–µ–Ω–∏—è: GitHub Discussions

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 

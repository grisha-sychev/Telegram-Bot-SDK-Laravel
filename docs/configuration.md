# ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TegBot v2.0

## –û–±–∑–æ—Ä

TegBot v2.0 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –º—É–ª—å—Ç–∏–±–æ—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –≥–∏–±–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

- ü§ñ **–ú—É–ª—å—Ç–∏–±–æ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚öôÔ∏è **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã –≤ —Ñ–∞–π–ª–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞
- üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—á–µ—Ä–µ–¥–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- üîß **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ö–æ–º–∞–Ω–¥—ã artisan –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

## –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ v2.0:

1. **–¢–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤** - —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ù–ï –≤ .env
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–æ–≤** - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞
3. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
4. **–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –≤—Å–µ —á–µ—Ä–µ–∑ artisan –∫–æ–º–∞–Ω–¥—ã

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### config/tegbot.php

```php
<?php

return [
    /*
    |--------------------------------------------------------------------------
    | TegBot v2.0 - –ú—É–ª—å—Ç–∏–±–æ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
    |--------------------------------------------------------------------------
    */
    
    /**
     * –ú—É–ª—å—Ç–∏–±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
     */
    'multibot' => [
        'enabled' => env('TEGBOT_MULTIBOT_ENABLED', true),
        'auto_create_classes' => env('TEGBOT_AUTO_CREATE_CLASSES', true),
        'bots_path' => env('TEGBOT_BOTS_PATH', 'App\\Bots'),
        'max_bots' => env('TEGBOT_MAX_BOTS', 100),
        'auto_enable' => env('TEGBOT_AUTO_ENABLE_BOTS', true),
    ],

    /**
     * –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
     */
    'debug' => env('TEGBOT_DEBUG', false),
    'timezone' => env('TEGBOT_TIMEZONE', config('app.timezone', 'UTC')),

    /*
    |--------------------------------------------------------------------------
    | API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤)
    |--------------------------------------------------------------------------
    */
    'api' => [
        'base_url' => env('TEGBOT_API_URL', 'https://api.telegram.org'),
        'timeout' => env('TEGBOT_API_TIMEOUT', 30),
        'retries' => env('TEGBOT_API_RETRIES', 3),
        'retry_delay' => env('TEGBOT_API_RETRY_DELAY', 1),
        'rate_limit_delay' => env('TEGBOT_API_RATE_LIMIT_DELAY', 5),
        'user_agent' => env('TEGBOT_USER_AGENT', 'TegBot/2.0 Laravel Bot Framework'),
    ],

    /*
    |--------------------------------------------------------------------------
    | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–≥–ª–æ–±–∞–ª—å–Ω–∞—è)
    |--------------------------------------------------------------------------
    */
    'security' => [
        'webhook_secret' => env('TEGBOT_WEBHOOK_SECRET'),
        'auto_generate_webhook_secret' => env('TEGBOT_AUTO_GENERATE_WEBHOOK_SECRET', true),
        'allowed_ips' => array_filter(explode(',', env('TEGBOT_ALLOWED_IPS', ''))),
        
        'spam_protection' => [
            'enabled' => env('TEGBOT_SPAM_PROTECTION', true),
            'max_messages_per_minute' => env('TEGBOT_SPAM_LIMIT', 20),
            'ban_duration_minutes' => env('TEGBOT_SPAM_BAN_DURATION', 60),
        ],
        
        'rate_limits' => [
            'global' => env('TEGBOT_RATE_LIMIT_GLOBAL', 100),
            'per_user' => env('TEGBOT_RATE_LIMIT_USER', 20),
            'per_chat' => env('TEGBOT_RATE_LIMIT_CHAT', 50),
            'commands' => env('TEGBOT_RATE_LIMIT_COMMANDS', 10),
        ],
        
        'validation' => [
            'max_message_length' => env('TEGBOT_MAX_MESSAGE_LENGTH', 4000),
            'block_html' => env('TEGBOT_BLOCK_HTML', true),
            'filter_sql_injection' => env('TEGBOT_FILTER_SQL', true),
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    |--------------------------------------------------------------------------
    */
    'webhook' => [
        'base_url' => env('TEGBOT_WEBHOOK_BASE_URL', config('app.url')),
        'path_prefix' => env('TEGBOT_WEBHOOK_PATH', '/webhook'),
        'auto_setup' => env('TEGBOT_AUTO_SETUP_WEBHOOKS', false),
        'ssl_verify' => env('TEGBOT_WEBHOOK_SSL_VERIFY', true),
    ],

    /*
    |--------------------------------------------------------------------------
    | –§–∞–π–ª—ã –∏ –º–µ–¥–∏–∞
    |--------------------------------------------------------------------------
    */
    'files' => [
        'download_path' => env('TEGBOT_DOWNLOAD_PATH', storage_path('app/tegbot/downloads')),
        'temp_path' => env('TEGBOT_TEMP_PATH', storage_path('app/tegbot/temp')),
        'max_file_size' => env('TEGBOT_MAX_FILE_SIZE', 20 * 1024 * 1024), // 20MB
        'allowed_types' => explode(',', env('TEGBOT_ALLOWED_TYPES', 'jpg,jpeg,png,gif,pdf,doc,docx,txt')),
        'auto_cleanup' => env('TEGBOT_AUTO_CLEANUP', true),
        'cleanup_hours' => env('TEGBOT_CLEANUP_HOURS', 24),
        
        'thumbnails' => [
            'enabled' => env('TEGBOT_THUMBNAILS', true),
            'quality' => env('TEGBOT_THUMBNAIL_QUALITY', 80),
            'max_width' => env('TEGBOT_THUMBNAIL_WIDTH', 300),
            'max_height' => env('TEGBOT_THUMBNAIL_HEIGHT', 300),
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    |--------------------------------------------------------------------------
    */
    'logging' => [
        'enabled' => env('TEGBOT_LOGGING', true),
        'level' => env('TEGBOT_LOG_LEVEL', 'info'),
        'multibot_logs' => env('TEGBOT_LOG_MULTIBOT', true),
        'store_commands_history' => env('TEGBOT_STORE_COMMANDS_HISTORY', true),
        
        'channels' => [
            'default' => env('TEGBOT_LOG_CHANNEL', 'stack'),
            'errors' => env('TEGBOT_ERROR_CHANNEL', 'daily'),
            'activity' => env('TEGBOT_ACTIVITY_CHANNEL', 'tegbot_activity'),
            'security' => env('TEGBOT_SECURITY_CHANNEL', 'tegbot_security'),
        ],
        
        'retention_days' => env('TEGBOT_LOG_RETENTION', 30),
        'max_entries' => env('TEGBOT_LOG_MAX_ENTRIES', 10000),
        'structured_logs' => env('TEGBOT_STRUCTURED_LOGS', true),
        'sensitive_fields' => ['password', 'token', 'secret', 'key'],
    ],

    /*
    |--------------------------------------------------------------------------
    | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    |--------------------------------------------------------------------------
    */
    'cache' => [
        'enabled' => env('TEGBOT_CACHE', true),
        'driver' => env('TEGBOT_CACHE_DRIVER', 'redis'),
        'prefix' => env('TEGBOT_CACHE_PREFIX', 'tegbot'),
        'ttl' => env('TEGBOT_CACHE_TTL', 3600),
        
        // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–∞—Ö
        'bot_info' => [
            'enabled' => env('TEGBOT_CACHE_BOT_INFO', true),
            'ttl' => env('TEGBOT_CACHE_BOT_INFO_TTL', 3600),
        ],
        
        'user_data_ttl' => env('TEGBOT_USER_CACHE_TTL', 1800),
        'command_cache_ttl' => env('TEGBOT_COMMAND_CACHE_TTL', 300),
    ],

    /*
    |--------------------------------------------------------------------------
    | –û—á–µ—Ä–µ–¥–∏
    |--------------------------------------------------------------------------
    */
    'queue' => [
        'enabled' => env('TEGBOT_QUEUE', false),
        'connection' => env('TEGBOT_QUEUE_CONNECTION', 'redis'),
        'queue' => env('TEGBOT_QUEUE_NAME', 'tegbot'),
        'retry_after' => env('TEGBOT_QUEUE_RETRY', 90),
        'timeout' => env('TEGBOT_QUEUE_TIMEOUT', 60),
    ],

    /*
    |--------------------------------------------------------------------------
    | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤)
    |--------------------------------------------------------------------------
    */
    'monitoring' => [
        'health_checks' => [
            'enabled' => env('TEGBOT_HEALTH_CHECKS', true),
            'interval_minutes' => env('TEGBOT_HEALTH_INTERVAL', 5),
            'timeout' => env('TEGBOT_HEALTH_TIMEOUT', 10),
            'per_bot_checks' => env('TEGBOT_PER_BOT_HEALTH', true),
        ],
        
        'alerts' => [
            'enabled' => env('TEGBOT_ALERTS', true),
            'channels' => explode(',', env('TEGBOT_ALERT_CHANNELS', 'telegram')),
            'email' => env('TEGBOT_ALERT_EMAIL'),
            'slack_webhook' => env('TEGBOT_SLACK_WEBHOOK'),
            
            'thresholds' => [
                'error_rate' => env('TEGBOT_ALERT_ERROR_RATE', 5),
                'response_time' => env('TEGBOT_ALERT_RESPONSE_TIME', 2000),
                'memory_usage' => env('TEGBOT_ALERT_MEMORY', 80),
                'disk_usage' => env('TEGBOT_ALERT_DISK', 85),
            ],
            
            'cooldown_minutes' => env('TEGBOT_ALERT_COOLDOWN', 15),
        ],
        
        'metrics' => [
            'enabled' => env('TEGBOT_METRICS', true),
            'per_bot_metrics' => env('TEGBOT_METRICS_PER_BOT', true),
            'export_path' => env('TEGBOT_METRICS_PATH', '/metrics'),
            'prometheus_enabled' => env('TEGBOT_PROMETHEUS', false),
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–º—É–ª—å—Ç–∏–±–æ—Ç)
    |--------------------------------------------------------------------------
    */
    'database' => [
        'connection' => env('TEGBOT_DB_CONNECTION', config('database.default')),
        'bots_table' => env('TEGBOT_BOTS_TABLE', 'tegbot_bots'),
        'messages_table' => env('TEGBOT_MESSAGES_TABLE', 'messages'),
        'users_table' => env('TEGBOT_USERS_TABLE', 'users'),
        
        'user_tracking' => env('TEGBOT_USER_TRACKING', true),
        'message_storage' => env('TEGBOT_MESSAGE_STORAGE', false),
        'command_history' => env('TEGBOT_COMMAND_HISTORY', true),
    ],

    /*
    |--------------------------------------------------------------------------
    | –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    |--------------------------------------------------------------------------
    */
    'localization' => [
        'default_locale' => env('TEGBOT_LOCALE', 'ru'),
        'supported_locales' => explode(',', env('TEGBOT_LOCALES', 'ru,en')),
        'auto_detect' => env('TEGBOT_AUTO_LOCALE', true),
        'fallback' => env('TEGBOT_FALLBACK_LOCALE', 'en'),
    ],

    /*
    |--------------------------------------------------------------------------
    | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    |--------------------------------------------------------------------------
    */
    'experimental' => [
        'ai_responses' => env('TEGBOT_AI_RESPONSES', false),
        'auto_translation' => env('TEGBOT_AUTO_TRANSLATE', false),
        'voice_recognition' => env('TEGBOT_VOICE_RECOGNITION', false),
        'image_analysis' => env('TEGBOT_IMAGE_ANALYSIS', false),
    ],
];
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–π .env —Ñ–∞–π–ª (–±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤!)

```env
# ==========================================
# TegBot v2.0 - –ú—É–ª—å—Ç–∏–±–æ—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# ==========================================

# –ú—É–ª—å—Ç–∏–±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_MULTIBOT_ENABLED=true
TEGBOT_AUTO_CREATE_CLASSES=true
TEGBOT_MAX_BOTS=100
TEGBOT_AUTO_ENABLE_BOTS=true

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_DEBUG=false
TEGBOT_WEBHOOK_SECRET=your_random_secret_32_chars

# Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_WEBHOOK_BASE_URL=https://yourdomain.com
TEGBOT_AUTO_GENERATE_WEBHOOK_SECRET=true
TEGBOT_AUTO_SETUP_WEBHOOKS=false

# API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤)
TEGBOT_API_TIMEOUT=30
TEGBOT_API_RETRIES=3
TEGBOT_API_RETRY_DELAY=1

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–≥–ª–æ–±–∞–ª—å–Ω–∞—è)
TEGBOT_SPAM_PROTECTION=true
TEGBOT_SPAM_LIMIT=20
TEGBOT_RATE_LIMIT_USER=20
TEGBOT_RATE_LIMIT_GLOBAL=100

# –§–∞–π–ª—ã –∏ –º–µ–¥–∏–∞
TEGBOT_MAX_FILE_SIZE=20971520
TEGBOT_DOWNLOAD_PATH=/storage/app/tegbot/downloads
TEGBOT_AUTO_CLEANUP=true
TEGBOT_CLEANUP_HOURS=24

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
TEGBOT_LOGGING=true
TEGBOT_LOG_LEVEL=info
TEGBOT_LOG_MULTIBOT=true
TEGBOT_STORE_COMMANDS_HISTORY=true
TEGBOT_LOG_RETENTION=30

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
TEGBOT_CACHE=true
TEGBOT_CACHE_DRIVER=redis
TEGBOT_CACHE_TTL=3600
TEGBOT_CACHE_BOT_INFO=true
TEGBOT_CACHE_BOT_INFO_TTL=3600

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
TEGBOT_HEALTH_CHECKS=true
TEGBOT_PER_BOT_HEALTH=true
TEGBOT_ALERTS=true
TEGBOT_METRICS_PER_BOT=true

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
TEGBOT_USER_TRACKING=true
TEGBOT_MESSAGE_STORAGE=false
TEGBOT_COMMAND_HISTORY=true
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –¢–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤ –±–æ–ª—å—à–µ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env! –û–Ω–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã artisan.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```env
# Development –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_DEBUG=true
TEGBOT_LOG_LEVEL=debug
TEGBOT_LOG_MULTIBOT=true
TEGBOT_CACHE=false
TEGBOT_QUEUE=false
TEGBOT_ALERTS=false

# –û—Ç–ª–∞–¥–∫–∞
TEGBOT_VERBOSE_LOGGING=true
TEGBOT_SPAM_PROTECTION=false
TEGBOT_AUTO_SETUP_WEBHOOKS=true
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```env
# Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_DEBUG=false
TEGBOT_LOG_LEVEL=warning
TEGBOT_CACHE=true
TEGBOT_QUEUE=true
TEGBOT_ALERTS=true

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
TEGBOT_SPAM_PROTECTION=true
TEGBOT_FILTER_SQL=true
TEGBOT_BLOCK_HTML=true
TEGBOT_AUTO_SETUP_WEBHOOKS=false

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
TEGBOT_CACHE_DRIVER=redis
TEGBOT_QUEUE_CONNECTION=redis
TEGBOT_CACHE_BOT_INFO=true
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
php artisan teg:config show

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
php artisan teg:config get multibot.enabled

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
php artisan teg:config set multibot.max_bots 200

# –°–±—Ä–æ—Å –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
php artisan teg:config reset

# –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
php artisan teg:config validate

# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
php artisan teg:config export --format=json
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –±–æ—Ç–æ–≤

–ö–∞–∂–¥—ã–π –±–æ—Ç –∏–º–µ–µ—Ç —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
php artisan teg:bot show myshop

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
php artisan teg:bot config myshop --setting=rate_limit --value=30
php artisan teg:bot config myshop --setting=language --value=en

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±–æ—Ç–∞
php artisan teg:bot admin myshop --add=123456789
php artisan teg:bot admin myshop --remove=987654321
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã tegbot_bots

```sql
CREATE TABLE tegbot_bots (
    id BIGINT PRIMARY KEY,
    name VARCHAR(255) UNIQUE,           -- –ò–º—è –±–æ—Ç–∞ (shop, news, support)
    token VARCHAR(255) UNIQUE,          -- –¢–æ–∫–µ–Ω –æ—Ç BotFather  
    username VARCHAR(255),              -- Username –±–æ—Ç–∞ (@shopbot)
    first_name VARCHAR(255),            -- –ò–º—è –±–æ—Ç–∞
    description TEXT,                   -- –û–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞
    bot_id BIGINT UNIQUE,              -- ID –±–æ—Ç–∞ –≤ Telegram
    enabled BOOLEAN DEFAULT TRUE,       -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –±–æ—Ç
    webhook_url VARCHAR(255),           -- URL webhook
    webhook_secret VARCHAR(255),        -- –°–µ–∫—Ä–µ—Ç webhook (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π)
    settings JSON,                      -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
    admin_ids JSON,                     -- ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±–æ—Ç–∞
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

### –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞ –≤ JSON

```json
{
    "language": "ru",
    "timezone": "Europe/Moscow",
    "features": ["payments", "inline_queries"],
    "rate_limit": 30,
    "spam_protection": {
        "enabled": true,
        "max_messages": 15
    },
    "auto_responses": true,
    "debug_mode": false,
    "custom_commands": {
        "welcome_message": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –º–∞–≥–∞–∑–∏–Ω!",
        "help_text": "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: /start, /catalog, /help"
    }
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –±–æ—Ç–æ–≤

### E-commerce –±–æ—Ç

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
php artisan teg:set

# –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
php artisan teg:bot config shop --setting=rate_limit --value=50
php artisan teg:bot config shop --setting=features --value='["payments","inline_queries","webhooks"]'
php artisan teg:bot config shop --setting=language --value=ru
php artisan teg:bot config shop --setting=timezone --value="Europe/Moscow"
```

```json
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è e-commerce –±–æ—Ç–∞
{
    "language": "ru",
    "timezone": "Europe/Moscow", 
    "features": ["payments", "inline_queries", "webhooks"],
    "rate_limit": 50,
    "max_file_size": 52428800,
    "allowed_file_types": ["jpg", "jpeg", "png", "pdf"],
    "payment_provider": "sberbank",
    "currency": "RUB",
    "auto_responses": true,
    "catalog_mode": "inline",
    "order_notifications": true
}
```

### –ù–æ–≤–æ—Å—Ç–Ω–æ–π –±–æ—Ç

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –±–æ—Ç–∞
php artisan teg:bot config news --setting=broadcast_mode --value=true
php artisan teg:bot config news --setting=max_subscribers --value=10000
php artisan teg:bot config news --setting=post_interval --value=300
```

```json
{
    "language": "ru",
    "broadcast_mode": true,
    "max_subscribers": 10000,
    "post_interval": 300,
    "auto_post": true,
    "categories": ["tech", "business", "sport"],
    "moderation": true,
    "analytics": true
}
```

### –°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
php artisan teg:bot config support --setting=ticket_system --value=true
php artisan teg:bot config support --setting=auto_assignment --value=true
php artisan teg:bot config support --setting=working_hours --value='{"start":"09:00","end":"18:00"}'
```

```json
{
    "language": "ru",
    "ticket_system": true,
    "auto_assignment": true,
    "working_hours": {
        "start": "09:00",
        "end": "18:00",
        "timezone": "Europe/Moscow",
        "days": ["mon", "tue", "wed", "thu", "fri"]
    },
    "queue_system": true,
    "priority_levels": ["low", "normal", "high", "urgent"],
    "auto_responses": {
        "greeting": true,
        "working_hours": true,
        "queue_position": true
    }
}
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
php artisan teg:config validate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞
php artisan teg:bot validate myshop

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –±–æ—Ç–æ–≤
php artisan teg:bot validate --all
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```
‚öôÔ∏è  –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ TegBot

‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
  ‚úÖ Webhook secret —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ‚úÖ –ü—É—Ç–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–ø–∏—Å–∏
  ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
  ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞

ü§ñ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–æ–≤:
  ‚úÖ shop (@shopbot): –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
  ‚úÖ news (@newsbot): –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞  
  ‚ùå support (@supportbot): –û—à–∏–±–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
    - –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç working_hours
    - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã

‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
  - TEGBOT_CACHE_DRIVER=file —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Redis –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
  - TEGBOT_QUEUE=false —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: 3 –±–æ—Ç–∞, –Ω–∞–π–¥–µ–Ω–æ: 2 –æ—à–∏–±–∫–∏, 2 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
```

## –ü—Ä–æ–¥–∞–∫—à–µ–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```env
# –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
TEGBOT_CACHE=true
TEGBOT_CACHE_DRIVER=redis
TEGBOT_CACHE_BOT_INFO=true
TEGBOT_CACHE_BOT_INFO_TTL=7200

# –û—á–µ—Ä–µ–¥–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
TEGBOT_QUEUE=true
TEGBOT_QUEUE_CONNECTION=redis

# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
TEGBOT_LOG_LEVEL=warning
TEGBOT_STORE_COMMANDS_HISTORY=false
TEGBOT_LOG_RETENTION=14
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```env
# –°—Ç—Ä–æ–≥–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
TEGBOT_DEBUG=false
TEGBOT_SPAM_PROTECTION=true
TEGBOT_RATE_LIMIT_GLOBAL=50
TEGBOT_FILTER_SQL=true
TEGBOT_BLOCK_HTML=true

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
TEGBOT_ALLOWED_IPS=149.154.160.0/20,91.108.4.0/22
TEGBOT_AUTO_SETUP_WEBHOOKS=false
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```env
# –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
TEGBOT_HEALTH_CHECKS=true
TEGBOT_PER_BOT_HEALTH=true
TEGBOT_ALERTS=true
TEGBOT_METRICS_PER_BOT=true

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤
TEGBOT_ALERT_EMAIL=admin@yourdomain.com
TEGBOT_ALERT_ERROR_RATE=3
TEGBOT_ALERT_RESPONSE_TIME=1500
```

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
php artisan teg:config show                    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
php artisan teg:config get security.spam_protection   # –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
php artisan teg:config set cache.ttl 7200     # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–æ–≤
php artisan teg:bot list                       # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–æ—Ç–æ–≤
php artisan teg:bot show myshop               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞
php artisan teg:bot config myshop --setting=language --value=en

# –í–∞–ª–∏–¥–∞—Ü–∏—è
php artisan teg:config validate              # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
php artisan teg:bot validate myshop          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞
php artisan teg:bot validate --all           # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ—Ö –±–æ—Ç–æ–≤

# –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç
php artisan teg:config export --format=json  # –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON
php artisan teg:migrate export               # –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –±–æ—Ç–æ–≤
php artisan teg:migrate import backup.json   # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

```bash
# Cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
# –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
*/15 * * * * cd /path/to/project && php artisan teg:config validate --quiet

# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –±–æ—Ç–æ–≤
0 2 * * * cd /path/to/project && php artisan teg:bot validate --all --fix

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
0 3 * * 0 cd /path/to/project && php artisan teg:logs clean
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å TegBot v1.x

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï: –ü–æ–ª–Ω–∞—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å v1.x!**

### –ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# 1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Ç–∞—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp config/telegram.php config/telegram.php.backup

# 2. –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç
composer update tegbot/tegbot

# 3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
php artisan vendor:publish --provider="Teg\Providers\TegbotServiceProvider" --force

# 4. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
php artisan migrate

# 5. –ü–µ—Ä–µ–Ω–æ—Å –±–æ—Ç–æ–≤ –≤ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
php artisan teg:migrate legacy --from=config/telegram.php.backup

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
php artisan teg:config validate
php artisan teg:bot list
```

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

| v1.x | v2.0 |
|------|------|
| `TELEGRAM_TOKEN` | –¢–æ–∫–µ–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö |
| `config/telegram.php` | `config/tegbot.php` + –ë–î |
| –û–¥–∏–Ω –±–æ—Ç | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–æ—Ç—ã |
| –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã |
| `/bot/{token}` | `/webhook/{botName}` |

---

‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TegBot v2.0** - –ø–æ–ª–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å –¥–ª—è –º—É–ª—å—Ç–∏–±–æ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã! 
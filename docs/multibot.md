# ü§ñ TegBot Multi-Bot System

## –û–±–∑–æ—Ä

TegBot —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏–±–æ—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –ø–æ–∑–≤–æ–ª—è—é—â—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–æ—Ç–∞–º–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Laravel. –ö–∞–∂–¥—ã–π –±–æ—Ç –∏–º–µ–µ—Ç —Å–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, —Ç–æ–∫–µ–Ω –∏ webhook, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–æ—Ç—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–æ—Ç–æ–≤
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–æ—Ç–æ–≤ –≤ –ë–î
- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ `php artisan teg:set`
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –±–æ—Ç–æ–≤
- ‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ webhook'–∏**: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ URL –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
php artisan migrate
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –±–æ—Ç–∞

```bash
php artisan teg:set
```

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç:
- **–ò–º—è –±–æ—Ç–∞** (–ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
- **–¢–æ–∫–µ–Ω** (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç @BotFather)
- **ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –±–æ—Ç–æ–≤

```bash
php artisan teg:bot list
```

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞

```bash
php artisan teg:set
```

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–æ—Ç—ã
2. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–º—è –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏
4. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ Telegram API
6. –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
7. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å –±–æ—Ç–∞
8. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–æ—Ç–æ–≤
php artisan teg:bot list

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –±–æ—Ç–µ
php artisan teg:bot show mybot

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –±–æ—Ç–∞
php artisan teg:bot enable mybot

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞
php artisan teg:bot disable mybot

# –£–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–∞
php artisan teg:bot delete mybot

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞
php artisan teg:bot test mybot
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `tegbot_bots`

```sql
CREATE TABLE tegbot_bots (
    id BIGINT PRIMARY KEY,
    name VARCHAR(255) UNIQUE,        -- –ò–º—è –±–æ—Ç–∞ (mybot)
    token VARCHAR(255) UNIQUE,       -- –¢–æ–∫–µ–Ω –æ—Ç BotFather
    username VARCHAR(255),           -- Username –±–æ—Ç–∞ (@mybot)
    first_name VARCHAR(255),         -- –ò–º—è –±–æ—Ç–∞
    description TEXT,                -- –û–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞
    bot_id BIGINT UNIQUE,           -- ID –±–æ—Ç–∞ –≤ Telegram
    enabled BOOLEAN DEFAULT TRUE,    -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –±–æ—Ç
    webhook_url VARCHAR(255),        -- URL webhook
    webhook_secret VARCHAR(255),     -- –°–µ–∫—Ä–µ—Ç webhook
    settings JSON,                   -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    admin_ids JSON,                  -- ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–æ–≤ –±–æ—Ç–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∫–ª–∞—Å—Å

```php
<?php

namespace App\Bots;

use Teg\LightBot;

class MybotBot extends LightBot
{
    public function commands(): void
    {
        $this->registerCommand('start', function () {
            $this->sendSelf('üéâ –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç mybot');
        }, [
            'description' => '–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞'
        ]);

        $this->registerCommand('help', function () {
            $this->sendSelf('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞\n/help - –ü–æ–º–æ—â—å');
        }, [
            'description' => '–ü–æ–º–æ—â—å'
        ]);
    }

    public function fallback(): void
    {
        $this->sendSelf('‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏.');
    }
}
```

## Webhook –º–∞—Ä—à—Ä—É—Ç—ã

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```
POST /webhook/{botName}
```

**–ü—Ä–∏–º–µ—Ä:** `https://yourdomain.com/webhook/mybot`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –¢–æ–∫–µ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ URL
- –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- –õ–µ–≥—á–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å

### –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

```
POST /bot/{token}
```

**–ü—Ä–∏–º–µ—Ä:** `https://yourdomain.com/bot/123456789:AABBccDD...`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –ú—É–ª—å—Ç–∏–±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_MULTIBOT_ENABLED=true
TEGBOT_AUTO_CREATE_CLASSES=true
TEGBOT_MAX_BOTS=100
TEGBOT_AUTO_ENABLE_BOTS=true

# Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TEGBOT_AUTO_GENERATE_WEBHOOK_SECRET=true
TEGBOT_WEBHOOK_BASE_URL=https://yourdomain.com

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
TEGBOT_LOG_MULTIBOT=true
TEGBOT_STORE_COMMANDS_HISTORY=true

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
TEGBOT_CACHE_BOT_INFO=true
TEGBOT_CACHE_BOT_INFO_TTL=3600
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ config/tegbot.php

```php
'multibot' => [
    'enabled' => true,
    'auto_create_classes' => true,
    'bots_path' => 'App\\Bots',
    'bots_namespace' => 'App\\Bots',
    'max_bots' => 100,
    'auto_enable' => true,
],
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞

```bash
php artisan teg:set
# –ò–º—è: shop
# –¢–æ–∫–µ–Ω: 123456789:AABBccDD...
# –ê–¥–º–∏–Ω—ã: 123456789
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–∞–π–ª: `app/Bots/ShopBot.php`
- Webhook: `https://yourdomain.com/webhook/shop`
- Database –∑–∞–ø–∏—Å—å –≤ `tegbot_bots`

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –±–æ—Ç–∞

```bash
php artisan teg:set
# –ò–º—è: news
# –¢–æ–∫–µ–Ω: 987654321:XYZabc...
# –ê–¥–º–∏–Ω—ã: 123456789,987654321
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–∞–π–ª: `app/Bots/NewsBot.php`
- Webhook: `https://yourdomain.com/webhook/news`

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Webhook Secret

–ö–∞–∂–¥—ã–π –±–æ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π webhook secret:

```php
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
$bot->webhook_secret = Str::random(32);
```

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

–£ –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤–æ–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:

```php
$bot->admin_ids = [123456789, 987654321];
```

### IP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ IP –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –±–æ—Ç–∞–º:

```env
TEGBOT_ALLOWED_IPS=1.2.3.4,5.6.7.8
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –±–æ—Ç–æ–≤

```bash
php artisan teg:health
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞

```bash
php artisan teg:bot test mybot
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –±–æ—Ç–∞–º

```env
TEGBOT_METRICS_PER_BOT=true
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ä–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `config/tegbot.php`:

```php
// –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
'token' => env('TEGBOT_TOKEN'),

// –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞
'token' => env('TEGBOT_TOKEN'), // –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
'multibot' => [
    'enabled' => true,
    // –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
],
```

### –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:
```bash
php artisan teg:set
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω –∏–∑ `.env`

3. –û–±–Ω–æ–≤–∏—Ç–µ webhook –≤ Telegram:
```bash
php artisan teg:webhook set https://yourdomain.com/webhook/mybot
```

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞:
```bash
php artisan teg:bot show mybot
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:
```bash
php artisan teg:bot test mybot
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
tail -f storage/logs/laravel.log | grep TegBot
```

### –ö–ª–∞—Å—Å –±–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞:
```bash
ls -la app/Bots/
```

2. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –∑–∞–Ω–æ–≤–æ:
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ SetupCommand –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞
php artisan teg:set
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
php artisan migrate
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã:
```bash
php artisan tinker
>>> Schema::hasTable('tegbot_bots')
>>> DB::table('tegbot_bots')->count()
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±–æ—Ç–æ–≤

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞
- –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –±—É–∫–≤—ã
- –ü—Ä–∏–º–µ—Ä—ã: `shop`, `news`, `support`, `analytics`

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

```
app/Bots/
‚îú‚îÄ‚îÄ ShopBot.php          # –ë–æ—Ç –º–∞–≥–∞–∑–∏–Ω–∞
‚îú‚îÄ‚îÄ NewsBot.php          # –ù–æ–≤–æ—Å—Ç–Ω–æ–π –±–æ—Ç
‚îú‚îÄ‚îÄ SupportBot.php       # –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
‚îî‚îÄ‚îÄ Traits/
    ‚îú‚îÄ‚îÄ HasAdminCommands.php
    ‚îî‚îÄ‚îÄ HasUserManagement.php
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º

```env
# Development
TEGBOT_DEBUG=true
TEGBOT_LOG_MULTIBOT=true
TEGBOT_AUTO_CREATE_CLASSES=true

# Production
TEGBOT_DEBUG=false
TEGBOT_CACHE_BOT_INFO=true
TEGBOT_AUTO_UPDATE_WEBHOOKS=false
```

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

```php
$bot = Bot::create([
    'name' => 'advanced',
    'token' => $token,
    'settings' => [
        'language' => 'en',
        'timezone' => 'Europe/London',
        'features' => ['payments', 'inline_queries'],
        'rate_limit' => 10,
    ]
]);
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –±–æ—Ç–µ

```php
class AdvancedBot extends LightBot
{
    private array $settings;

    public function setBotConfig(array $config): void
    {
        $this->settings = $config['settings'] ?? [];
    }

    public function commands(): void
    {
        $language = $this->settings['language'] ?? 'ru';
        
        $this->registerCommand('start', function () use ($language) {
            $message = $language === 'en' 
                ? 'üéâ Hello! I am advanced bot'
                : 'üéâ –ü—Ä–∏–≤–µ—Ç! –Ø –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –±–æ—Ç';
            
            $this->sendSelf($message);
        });
    }
}
```

## API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –∫–æ–¥–µ

```php
use App\Models\Bot;

// –ü–æ –∏–º–µ–Ω–∏
$bot = Bot::byName('mybot')->first();

// –ü–æ —Ç–æ–∫–µ–Ω—É
$bot = Bot::byToken($token)->first();

// –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –±–æ—Ç—ã
$activeBots = Bot::enabled()->get();
```

### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ

```php
use App\Models\Bot;

$bot = Bot::create([
    'name' => 'automated',
    'token' => '123456789:AABBccDD...',
    'username' => 'automatedbot',
    'first_name' => 'Automated Bot',
    'bot_id' => 123456789,
    'enabled' => true,
    'admin_ids' => [987654321],
    'settings' => [
        'auto_respond' => true,
        'language' => 'ru'
    ]
]);
```

### –°–æ–±—ã—Ç–∏—è –±–æ—Ç–æ–≤

–í—ã –º–æ–∂–µ—Ç–µ —Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–≤:

```php
// –í EventServiceProvider
use App\Models\Bot;

Bot::created(function ($bot) {
    Log::info("New bot created: {$bot->name}");
    
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º
    // –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±–æ—Ç–∞
    // –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
});

Bot::updated(function ($bot) {
    if ($bot->wasChanged('enabled')) {
        $status = $bot->enabled ? 'enabled' : 'disabled';
        Log::info("Bot {$bot->name} was {$status}");
    }
});
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú—É–ª—å—Ç–∏–±–æ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ TegBot –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Telegram –±–æ—Ç–∞–º–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ Laravel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- üîß **–ü—Ä–æ—Å—Ç–æ—Ç—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ webhook secret
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- üöÄ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–æ—Ç–æ–≤
- üîÑ **–û–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–æ–π

–ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥—ã `php artisan teg:set` –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –±–æ—Ç–∞ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç! 